- name: Create new user on master server
  hosts: all
  become: yes
  tasks:
    - name: Ensure '{{ new_username }}' group exists
      ansible.builtin.group:
        name: "{{ new_username }}"
        state: present

    - name: Create the user '{{ new_username }}' with password and shell
      ansible.builtin.user:
        name: "{{ new_username }}"
        password: "{{ user_password | password_hash('sha512') }}"
        groups: "{{ new_username }}"
        shell: /bin/bash
        state: present

    - name: Create the file for user '{{ new_username }}' with content
      # CHANGE 1: Use the 'ansible.builtin.copy' module (as you correctly intended)
      ansible.builtin.copy:
        # CHANGE 2: Use 'dest' for the destination path
        dest: "/home/{{ new_username }}/don" 
        # REMOVE ANY LINE STARTING WITH 'state:' ⬅️ THIS IS THE FIX
        owner: "{{ new_username }}"
        group: "{{ new_username }}"
        mode: '0644'
        content: "this just trial via jenkins we can assign the playbook task or not trigger from github"
