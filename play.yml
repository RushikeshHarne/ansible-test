- name: Create new user on master server
  hosts: all
  become: yes
  tasks:
    - name: Ensure '{{ new_username }}' group exists
      ansible.builtin.group:
        name: "{{ new_username }}"
        state: present

    - name: Create the user '{{ new_username }}' with password and shell
      ansible.builtin.user:
        name: "{{ new_username }}"
        password: "{{ user_password | password_hash('sha512') }}"
        groups: "{{ new_username }}"
        shell: /bin/bash
        state: present

    - name: create the file for user '{{ new_username }}'  # Task name corrected for clarity
      ansible.builtin.file:                          # Corrected: Module name requires a colon and is best fully qualified
        path: "/home/{{ new_username }}/don"      # Corrected: Path needs quotes and proper variable syntax
        state: touch
        owner: "{{ new_username }}"
        group: "{{ new_username }}"
        mode: '0644'
        content: "this just trial via jenkins we can assign the playbook task or not trigger from github"
